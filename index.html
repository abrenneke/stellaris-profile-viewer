<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Stellaris Profile Viewer</title>
    <meta
      name="description"
      content="View Stellaris script profiling log files in a user-friendly and organized manner with Stellaris Profile Viewer. Simply upload your log file and wait for the tool to generate a breakdown of your code's performance, including detailed statistics on execution time, parent-child relationships, and more."
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
    <link href="./index.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="./stellaris.ico" />
    <script src="./index.js" defer type="module"></script>
  </head>

  <body>
    <div id="wrapper">
      <div id="container">
        <div id="toolbar">
          <div id="left-toolbar">
            <label class="button" id="toolbar-select-file-button" for="file"
              >Select File</label
            >
            <div class="toolbar-dropdown">
              <label for="root-items-select">Show:</label>
              <select id="root-items-select">
                <option value="10">10</option>
                <option value="50">50</option>
                <option value="100" selected>100</option>
                <option value="500">500</option>
                <option value="1000">1000</option>
              </select>
            </div>
          </div>
          <div id="right-toolbar">
            <a href="https://github.com/abrenneke/stellaris-profile-viewer"
              ><img src="./github-mark-white.svg" alt="GitHub Repository" />
            </a>
          </div>
        </div>
        <div id="table-container"></div>
        <div id="spinner"></div>
        <div id="entry-container">
          <h1>Stellaris Profile Viewer</h1>
          <section id="select-file-section">
            <p>
              This tool will help you view
              <span class="mono">script_profiling.log</span> files. To get
              started, simply select your log file using the button below and
              wait.
            </p>
            <label class="button" for="file">Select File</label>
            <input type="file" id="file" />
            <p>This process is entirely client-side.</p>
          </section>
          <section id="how-to-profile-section">
            <h2>How to Profile Mod Scripts</h2>
            <p>
              If you're experiencing lag while playing Stellaris, it's possible
              that one or more mods are causing performance issues. To help
              identify the culprit, you can use the Stellaris Profile Viewer to
              analyze the log file generated by the game's script profiler. This
              log file contains information about the execution time of various
              scripts and can help pinpoint which mod or script is causing the
              lag. Follow the steps below to generate and analyze the log file:
            </p>
            <ol>
              <li>Open the console with the <kbd>~</kbd> key</li>
              <li>Run the command <code>script_profiler</code></li>
              <li>Wait a couple months in game</li>
              <li>Run the command <code>script_profiler</code> again</li>
              <li>
                Find
                <code
                  >Documents\Paradox
                  Interactive\Stellaris\logs\script_profiling.log</code
                >
              </li>
            </ol>
          </section>
        </div>

        <div id="error-container">
          <div class="error-message-container">
            <h2>Error</h2>
            <p id="error-message">
              There was an error parsing the log file. Please make sure the file
              is in the correct format and try again.
            </p>
          </div>
          <div id="try-again-container">
            <button class="button" id="try-again">Try Again</button>
          </div>
        </div>
      </div>

      <div id="footer">
        <div class="disclaimer">
          <p>
            Full disclosure, this app was created for fun with assistance from
            ChatGPT, an AI language model developed by OpenAI.
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
